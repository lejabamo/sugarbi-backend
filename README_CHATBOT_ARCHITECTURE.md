# ğŸ¤– SugarBI Chatbot Architecture

## ğŸ“‹ Tabla de Contenidos
- [VisiÃ³n General](#visiÃ³n-general)
- [Arquitectura del Sistema](#arquitectura-del-sistema)
- [Filtros Inteligentes](#filtros-inteligentes)
- [Proceso del Chatbot](#proceso-del-chatbot)
- [AnÃ¡lisis OLAP](#anÃ¡lisis-olap)
- [Flujo de Datos](#flujo-de-datos)
- [Componentes TÃ©cnicos](#componentes-tÃ©cnicos)
- [APIs y Endpoints](#apis-y-endpoints)

## ğŸ¯ VisiÃ³n General

SugarBI Chatbot es un sistema inteligente de anÃ¡lisis de datos agrÃ­colas que combina procesamiento de lenguaje natural (NLP), filtros reactivos y anÃ¡lisis multidimensional (OLAP) para proporcionar insights sobre la producciÃ³n de caÃ±a de azÃºcar.

### CaracterÃ­sticas Principales:
- **Chatbot Inteligente**: Procesamiento de consultas en lenguaje natural
- **Filtros Reactivos**: Sistema de filtros que se adapta dinÃ¡micamente
- **AnÃ¡lisis OLAP**: Operaciones multidimensionales avanzadas
- **Visualizaciones DinÃ¡micas**: GrÃ¡ficos interactivos y exportaciÃ³n de datos

## ğŸ—ï¸ Arquitectura del Sistema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        SUGARBI ECOSYSTEM                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Frontend (React + TypeScript)                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Dashboard     â”‚ â”‚    Chatbot      â”‚ â”‚   OLAP Analyticsâ”‚   â”‚
â”‚  â”‚   - Filtros     â”‚ â”‚   - NLP Query   â”‚ â”‚   - 3D Cube     â”‚   â”‚
â”‚  â”‚   - GrÃ¡ficos    â”‚ â”‚   - Visualiz.   â”‚ â”‚   - Wizard      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Backend (Flask + Python)                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Smart Filters  â”‚ â”‚  Chatbot Engine â”‚ â”‚   OLAP Engine   â”‚   â”‚
â”‚  â”‚  - Interseccionesâ”‚ â”‚  - LangChain    â”‚ â”‚   - Drill-down  â”‚   â”‚
â”‚  â”‚  - ValidaciÃ³n   â”‚ â”‚  - SQL Gen      â”‚ â”‚   - Aggregationsâ”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Data Layer (MySQL)                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Data Mart     â”‚ â”‚   Hechos        â”‚ â”‚   Dimensiones   â”‚   â”‚
â”‚  â”‚   - Cosechas    â”‚ â”‚   - ProducciÃ³n  â”‚ â”‚   - Fincas      â”‚   â”‚
â”‚  â”‚   - Calidad     â”‚ â”‚   - Toneladas   â”‚ â”‚   - Variedades  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” Filtros Inteligentes

### Concepto
Los Filtros Inteligentes son un sistema reactivo que calcula dinÃ¡micamente las opciones disponibles basÃ¡ndose en las selecciones previas, asegurando que solo se muestren combinaciones vÃ¡lidas de datos.

### Arquitectura de Filtros

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SISTEMA DE FILTROS INTELIGENTES              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   Usuario   â”‚â”€â”€â”€â–¶â”‚  Frontend   â”‚â”€â”€â”€â–¶â”‚  Backend    â”‚         â”‚
â”‚  â”‚  Selecciona â”‚    â”‚  Smart      â”‚    â”‚  Filter     â”‚         â”‚
â”‚  â”‚  Filtros    â”‚    â”‚  Filters    â”‚    â”‚  Manager    â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚         â”‚                   â”‚                   â”‚               â”‚
â”‚         â”‚                   â”‚                   â–¼               â”‚
â”‚         â”‚                   â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚         â”‚                   â”‚            â”‚ Interseccionesâ”‚      â”‚
â”‚         â”‚                   â”‚            â”‚ Calculator   â”‚        â”‚
â”‚         â”‚                   â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â”‚                   â”‚                   â”‚               â”‚
â”‚         â”‚                   â”‚                   â–¼               â”‚
â”‚         â”‚                   â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚         â”‚                   â”‚            â”‚   Base      â”‚        â”‚
â”‚         â”‚                   â”‚            â”‚   Data      â”‚        â”‚
â”‚         â”‚                   â”‚            â”‚   Loader    â”‚        â”‚
â”‚         â”‚                   â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â”‚                   â”‚                   â”‚               â”‚
â”‚         â”‚                   â”‚                   â–¼               â”‚
â”‚         â”‚                   â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚         â”‚                   â”‚            â”‚   MySQL     â”‚        â”‚
â”‚         â”‚                   â”‚            â”‚  Database   â”‚        â”‚
â”‚         â”‚                   â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â”‚                   â”‚                                   â”‚
â”‚         â”‚                   â–¼                                   â”‚
â”‚         â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚         â”‚            â”‚ Opciones    â”‚                            â”‚
â”‚         â”‚            â”‚ Filtradas   â”‚                            â”‚
â”‚         â”‚            â”‚ Disponibles â”‚                            â”‚
â”‚         â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚         â”‚                   â”‚                                   â”‚
â”‚         â”‚                   â–¼                                   â”‚
â”‚         â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚         â”‚            â”‚  Dashboard  â”‚                            â”‚
â”‚         â”‚            â”‚  Actualizadoâ”‚                            â”‚
â”‚         â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Flujo de Filtros Inteligentes

```
1. Usuario selecciona AÃ‘O (ej: 2025)
   â”‚
   â–¼
2. Sistema calcula MESES disponibles para 2025
   â”‚
   â–¼
3. Usuario selecciona MES (ej: Enero)
   â”‚
   â–¼
4. Sistema calcula ZONAS disponibles para 2025/Enero
   â”‚
   â–¼
5. Usuario selecciona ZONA (ej: Zona 2)
   â”‚
   â–¼
6. Sistema calcula VARIEDADES disponibles para 2025/Enero/Zona2
   â”‚
   â–¼
7. Usuario selecciona VARIEDAD (ej: CC 11-600)
   â”‚
   â–¼
8. Sistema calcula FINCAS disponibles para la combinaciÃ³n completa
   â”‚
   â–¼
9. Dashboard se actualiza con datos filtrados
```

### Estados de Filtros

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ESTADOS DE FILTROS                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ğŸŸ¢ SELECCIONADO    - Filtro activo con valor especÃ­fico       â”‚
â”‚  ğŸŸ  DISPONIBLE      - Opciones vÃ¡lidas para seleccionar        â”‚
â”‚  ğŸ”´ BLOQUEADO       - Opciones no disponibles (sin datos)      â”‚
â”‚                                                                 â”‚
â”‚  Ejemplo de Estados:                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  AÃ‘O    â”‚  MES    â”‚  ZONA   â”‚VARIEDAD â”‚ FINCA   â”‚           â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
â”‚  â”‚ ğŸŸ¢ 2025 â”‚ ğŸŸ¢ Ene  â”‚ ğŸŸ¢ Z2   â”‚ ğŸŸ¢ CC11 â”‚ ğŸŸ  F050 â”‚           â”‚
â”‚  â”‚         â”‚         â”‚         â”‚         â”‚ ğŸŸ  F139 â”‚           â”‚
â”‚  â”‚         â”‚         â”‚         â”‚         â”‚ ğŸŸ  F177 â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¤– Proceso del Chatbot

### Arquitectura del Chatbot

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CHATBOT ENGINE                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   Usuario   â”‚â”€â”€â”€â–¶â”‚  Frontend   â”‚â”€â”€â”€â–¶â”‚  Backend    â”‚         â”‚
â”‚  â”‚  Escribe    â”‚    â”‚  Chat UI    â”‚    â”‚  Chat API   â”‚         â”‚
â”‚  â”‚  Consulta   â”‚    â”‚             â”‚    â”‚             â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚         â”‚                   â”‚                   â”‚               â”‚
â”‚         â”‚                   â”‚                   â–¼               â”‚
â”‚         â”‚                   â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚         â”‚                   â”‚            â”‚ Query       â”‚        â”‚
â”‚         â”‚                   â”‚            â”‚ Parser      â”‚        â”‚
â”‚         â”‚                   â”‚            â”‚ (NLP)       â”‚        â”‚
â”‚         â”‚                   â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â”‚                   â”‚                   â”‚               â”‚
â”‚         â”‚                   â”‚                   â–¼               â”‚
â”‚         â”‚                   â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚         â”‚                   â”‚            â”‚ SQL         â”‚        â”‚
â”‚         â”‚                   â”‚            â”‚ Generator   â”‚        â”‚
â”‚         â”‚                   â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â”‚                   â”‚                   â”‚               â”‚
â”‚         â”‚                   â”‚                   â–¼               â”‚
â”‚         â”‚                   â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚         â”‚                   â”‚            â”‚ Database    â”‚        â”‚
â”‚         â”‚                   â”‚            â”‚ Query       â”‚        â”‚
â”‚         â”‚                   â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â”‚                   â”‚                   â”‚               â”‚
â”‚         â”‚                   â”‚                   â–¼               â”‚
â”‚         â”‚                   â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚         â”‚                   â”‚            â”‚ Response    â”‚        â”‚
â”‚         â”‚                   â”‚            â”‚ Generator   â”‚        â”‚
â”‚         â”‚                   â”‚            â”‚ (LangChain) â”‚        â”‚
â”‚         â”‚                   â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â”‚                   â”‚                   â”‚               â”‚
â”‚         â”‚                   â”‚                   â–¼               â”‚
â”‚         â”‚                   â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚         â”‚                   â”‚            â”‚ Natural     â”‚        â”‚
â”‚         â”‚                   â”‚            â”‚ Language    â”‚        â”‚
â”‚         â”‚                   â”‚            â”‚ Response    â”‚        â”‚
â”‚         â”‚                   â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â”‚                   â”‚                                   â”‚
â”‚         â”‚                   â–¼                                   â”‚
â”‚         â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚         â”‚            â”‚ VisualizaciÃ³nâ”‚                           â”‚
â”‚         â”‚            â”‚ + Respuesta  â”‚                           â”‚
â”‚         â”‚            â”‚ Textual      â”‚                           â”‚
â”‚         â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Flujo de Procesamiento del Chatbot

```
1. Usuario: "Â¿CuÃ¡l es la finca mÃ¡s productiva en enero 2025?"
   â”‚
   â–¼
2. Query Parser (NLP):
   - Detecta: QueryType.TOP_RANKING
   - Detecta: Metric.TONELADAS
   - Detecta: Dimension.FINCA
   - Detecta: Filters: {aÃ±o: 2025, mes: 1}
   â”‚
   â–¼
3. SQL Generator:
   - Genera: SELECT f.nombre_finca, SUM(h.toneladas_cana_molida) as total
             FROM hechos_cosecha h
             JOIN dim_finca f ON h.id_finca = f.id_finca
             WHERE h.aÃ±o = 2025 AND h.mes = 1
             GROUP BY f.id_finca, f.nombre_finca
             ORDER BY total DESC LIMIT 1
   â”‚
   â–¼
4. Database Query:
   - Ejecuta SQL en MySQL
   - Retorna: [{"nombre_finca": "Finca_050", "total": 2300.5}]
   â”‚
   â–¼
5. Response Generator:
   - Genera respuesta natural: "La finca mÃ¡s productiva en enero 2025 es Finca_050 con 2,300.5 toneladas"
   - Crea datos para grÃ¡fico: {labels: ["Finca_050"], data: [2300.5]}
   â”‚
   â–¼
6. Frontend:
   - Muestra respuesta textual en verde
   - Renderiza grÃ¡fico de barras
   - Destaca barra mÃ¡xima en verde
```

### Tipos de Consultas Soportadas

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TIPOS DE CONSULTAS                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ğŸ“Š TOP RANKING                                                 â”‚
â”‚  "Â¿CuÃ¡les son las 5 mejores fincas por producciÃ³n?"            â”‚
â”‚  "Top 10 variedades con mayor TCH"                             â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“ˆ TENDENCIAS                                                  â”‚
â”‚  "Muestra la producciÃ³n por aÃ±o"                               â”‚
â”‚  "EvoluciÃ³n de toneladas por mes en 2025"                      â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“‹ ESTADÃSTICAS                                                â”‚
â”‚  "Â¿CuÃ¡l es el promedio de producciÃ³n?"                         â”‚
â”‚  "Muestra el total de toneladas por zona"                      â”‚
â”‚                                                                 â”‚
â”‚  ğŸ” DISTRIBUCIÃ“N                                                â”‚
â”‚  "DistribuciÃ³n de producciÃ³n por variedad"                     â”‚
â”‚  "ProducciÃ³n por zona en 2024"                                 â”‚
â”‚                                                                 â”‚
â”‚  ğŸ¯ COMPARACIONES                                               â”‚
â”‚  "Compara la producciÃ³n entre 2024 y 2025"                     â”‚
â”‚  "Diferencias entre zonas 1 y 2"                               â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š AnÃ¡lisis OLAP

### Concepto
El anÃ¡lisis OLAP (Online Analytical Processing) permite realizar operaciones multidimensionales sobre los datos, incluyendo drill-down, roll-up, slice, dice y pivot.

### Arquitectura OLAP

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        OLAP ENGINE                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   Usuario   â”‚â”€â”€â”€â–¶â”‚  Frontend   â”‚â”€â”€â”€â–¶â”‚  Backend    â”‚         â”‚
â”‚  â”‚  Configura  â”‚    â”‚  OLAP       â”‚    â”‚  OLAP       â”‚         â”‚
â”‚  â”‚  AnÃ¡lisis   â”‚    â”‚  Wizard     â”‚    â”‚  Engine     â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚         â”‚                   â”‚                   â”‚               â”‚
â”‚         â”‚                   â”‚                   â–¼               â”‚
â”‚         â”‚                   â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚         â”‚                   â”‚            â”‚ Metric      â”‚        â”‚
â”‚         â”‚                   â”‚            â”‚ Selection   â”‚        â”‚
â”‚         â”‚                   â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â”‚                   â”‚                   â”‚               â”‚
â”‚         â”‚                   â”‚                   â–¼               â”‚
â”‚         â”‚                   â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚         â”‚                   â”‚            â”‚ Dimension   â”‚        â”‚
â”‚         â”‚                   â”‚            â”‚ Selection   â”‚        â”‚
â”‚         â”‚                   â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â”‚                   â”‚                   â”‚               â”‚
â”‚         â”‚                   â”‚                   â–¼               â”‚
â”‚         â”‚                   â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚         â”‚                   â”‚            â”‚ Aggregation â”‚        â”‚
â”‚         â”‚                   â”‚            â”‚ Functions   â”‚        â”‚
â”‚         â”‚                   â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â”‚                   â”‚                   â”‚               â”‚
â”‚         â”‚                   â”‚                   â–¼               â”‚
â”‚         â”‚                   â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚         â”‚                   â”‚            â”‚ SQL Query   â”‚        â”‚
â”‚         â”‚                   â”‚            â”‚ Generator   â”‚        â”‚
â”‚         â”‚                   â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â”‚                   â”‚                   â”‚               â”‚
â”‚         â”‚                   â”‚                   â–¼               â”‚
â”‚         â”‚                   â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚         â”‚                   â”‚            â”‚ 3D Cube     â”‚        â”‚
â”‚         â”‚                   â”‚            â”‚ Visualizationâ”‚       â”‚
â”‚         â”‚                   â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â”‚                   â”‚                                   â”‚
â”‚         â”‚                   â–¼                                   â”‚
â”‚         â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚         â”‚            â”‚ Results     â”‚                            â”‚
â”‚         â”‚            â”‚ Table +     â”‚                            â”‚
â”‚         â”‚            â”‚ Export      â”‚                            â”‚
â”‚         â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Wizard de ConfiguraciÃ³n OLAP

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    OLAP CONFIGURATION WIZARD                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  PASO 1: SELECCIÃ“N DE MÃ‰TRICAS                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ¯ Toneladas    ğŸ“Š TCH        ğŸ¯ Brix                  â”‚   â”‚
â”‚  â”‚  ğŸ­ Sacarosa     ğŸ“ Ãrea       ğŸ“ˆ ProducciÃ³n            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  PASO 2: SELECCIÃ“N DE DIMENSIONES                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ¢ Fincas       ğŸŒ± Variedades  ğŸŒ Zonas               â”‚   â”‚
â”‚  â”‚  ğŸ“… Tiempo       ğŸ“Š Calidad     ğŸ“ˆ ProducciÃ³n          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  PASO 3: FUNCIONES DE AGREGACIÃ“N                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  â• SUM          ğŸ“Š AVG         ğŸ”¢ COUNT                â”‚   â”‚
â”‚  â”‚  ğŸ“ˆ MAX          ğŸ“‰ MIN         ğŸ“Š STDDEV               â”‚   â”‚
â”‚  â”‚  ğŸ“Š VARIANCE     ğŸ“Š MEDIAN      ğŸ”„ PIVOT                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  PASO 4: VISUALIZACIÃ“N 3D                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ§Š Cubo 3D Interactivo                               â”‚   â”‚
â”‚  â”‚  - RotaciÃ³n con mouse                                 â”‚   â”‚
â”‚  â”‚  - Drill-down en caras                                â”‚   â”‚
â”‚  â”‚  - Slice & Dice                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Operaciones OLAP Soportadas

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    OPERACIONES OLAP                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ğŸ” DRILL-DOWN                                                   â”‚
â”‚  De AÃ±o â†’ Mes â†’ DÃ­a                                             â”‚
â”‚  De Zona â†’ Finca â†’ Variedad                                     â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“ˆ ROLL-UP                                                      â”‚
â”‚  De DÃ­a â†’ Mes â†’ AÃ±o                                             â”‚
â”‚  De Variedad â†’ Finca â†’ Zona                                     â”‚
â”‚                                                                 â”‚
â”‚  âœ‚ï¸ SLICE                                                        â”‚
â”‚  Filtrar por una dimensiÃ³n especÃ­fica                           â”‚
â”‚  Ej: Solo datos de 2025                                         â”‚
â”‚                                                                 â”‚
â”‚  ğŸ² DICE                                                        â”‚
â”‚  Filtrar por mÃºltiples dimensiones                              â”‚
â”‚  Ej: Zona 1 + Enero 2025                                       â”‚
â”‚                                                                 â”‚
â”‚  ğŸ”„ PIVOT                                                       â”‚
â”‚  Cambiar orientaciÃ³n de dimensiones                             â”‚
â”‚  Filas â†” Columnas                                               â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“Š AGGREGATIONS                                                â”‚
â”‚  SUM, AVG, COUNT, MAX, MIN, STDDEV, VARIANCE, MEDIAN           â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Flujo de Datos

### Flujo Completo del Sistema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FLUJO DE DATOS COMPLETO                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1. CARGA INICIAL                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   Frontend  â”‚â”€â”€â”€â–¶â”‚   Backend   â”‚â”€â”€â”€â–¶â”‚  Database   â”‚         â”‚
â”‚  â”‚  Carga      â”‚    â”‚  Loads      â”‚    â”‚  Returns    â”‚         â”‚
â”‚  â”‚  Dashboard  â”‚    â”‚  Base Data  â”‚    â”‚  Raw Data   â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚         â”‚                   â”‚                   â”‚               â”‚
â”‚         â–¼                   â–¼                   â–¼               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  Smart      â”‚    â”‚  Filter     â”‚    â”‚  Processed  â”‚         â”‚
â”‚  â”‚  Filters    â”‚    â”‚  Manager    â”‚    â”‚  Data       â”‚         â”‚
â”‚  â”‚  Ready      â”‚    â”‚  Initializedâ”‚    â”‚  Cached     â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                 â”‚
â”‚  2. INTERACCIÃ“N DEL USUARIO                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   Usuario   â”‚â”€â”€â”€â–¶â”‚  Frontend   â”‚â”€â”€â”€â–¶â”‚  Backend    â”‚         â”‚
â”‚  â”‚  Interacts  â”‚    â”‚  Processes  â”‚    â”‚  Processes  â”‚         â”‚
â”‚  â”‚  (Filter/   â”‚    â”‚  Request    â”‚    â”‚  Request    â”‚         â”‚
â”‚  â”‚   Query)    â”‚    â”‚             â”‚    â”‚             â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚         â”‚                   â”‚                   â”‚               â”‚
â”‚         â”‚                   â”‚                   â–¼               â”‚
â”‚         â”‚                   â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚         â”‚                   â”‚            â”‚  Database   â”‚        â”‚
â”‚         â”‚                   â”‚            â”‚  Query      â”‚        â”‚
â”‚         â”‚                   â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â”‚                   â”‚                   â”‚               â”‚
â”‚         â”‚                   â”‚                   â–¼               â”‚
â”‚         â”‚                   â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚         â”‚                   â”‚            â”‚  Results    â”‚        â”‚
â”‚         â”‚                   â”‚            â”‚  Processing â”‚        â”‚
â”‚         â”‚                   â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â”‚                   â”‚                                   â”‚
â”‚         â”‚                   â–¼                                   â”‚
â”‚         â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚         â”‚            â”‚  Response   â”‚                            â”‚
â”‚         â”‚            â”‚  Generation â”‚                            â”‚
â”‚         â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚         â”‚                   â”‚                                   â”‚
â”‚         â”‚                   â–¼                                   â”‚
â”‚         â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚         â”‚            â”‚  Frontend   â”‚                            â”‚
â”‚         â”‚            â”‚  Update     â”‚                            â”‚
â”‚         â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                                                 â”‚
â”‚  3. VISUALIZACIÃ“N                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  Charts     â”‚    â”‚  Tables     â”‚    â”‚  Export     â”‚         â”‚
â”‚  â”‚  Generated  â”‚    â”‚  Populated  â”‚    â”‚  Options    â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ› ï¸ Componentes TÃ©cnicos

### Backend Components

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BACKEND COMPONENTS                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ğŸ“ chatbot/                                                    â”‚
â”‚  â”œâ”€â”€ langchain_chatbot.py      # Motor principal del chatbot   â”‚
â”‚  â”œâ”€â”€ query_parser.py           # Parser de consultas NLP       â”‚
â”‚  â””â”€â”€ sql_generator.py          # Generador de consultas SQL    â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“ filter_intersections.py                                    â”‚
â”‚  â”œâ”€â”€ FilterManager             # Gestor de filtros inteligentesâ”‚
â”‚  â”œâ”€â”€ load_base_data()          # Carga datos base              â”‚
â”‚  â”œâ”€â”€ calculate_intersections() # Calcula intersecciones        â”‚
â”‚  â””â”€â”€ get_filtered_data()       # Obtiene datos filtrados       â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“ dashboard/                                                  â”‚
â”‚  â”œâ”€â”€ olap_engine.py            # Motor OLAP                    â”‚
â”‚  â”œâ”€â”€ visualization_engine.py   # Motor de visualizaciones      â”‚
â”‚  â””â”€â”€ powerbi_connector.py      # Conector Power BI             â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“ web/                                                        â”‚
â”‚  â”œâ”€â”€ app.py                    # AplicaciÃ³n Flask principal    â”‚
â”‚  â”œâ”€â”€ routes.py                 # Rutas de la API               â”‚
â”‚  â””â”€â”€ config.py                 # ConfiguraciÃ³n                 â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Frontend Components

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FRONTEND COMPONENTS                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ğŸ“ src/components/                                             â”‚
â”‚  â”œâ”€â”€ SmartFilters.tsx          # Filtros inteligentes          â”‚
â”‚  â”œâ”€â”€ Chart.tsx                 # Componente de grÃ¡ficos        â”‚
â”‚  â”œâ”€â”€ ChatMessage.tsx           # Mensajes del chatbot          â”‚
â”‚  â”œâ”€â”€ ChatAvatar.tsx            # Avatar animado                â”‚
â”‚  â””â”€â”€ ChartControls.tsx         # Controles de grÃ¡ficos         â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“ src/pages/                                                  â”‚
â”‚  â”œâ”€â”€ Dashboard.tsx             # PÃ¡gina principal              â”‚
â”‚  â”œâ”€â”€ Chatbot.tsx               # Interfaz del chatbot          â”‚
â”‚  â””â”€â”€ OLAPAnalytics.tsx         # AnÃ¡lisis OLAP                 â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“ src/hooks/                                                  â”‚
â”‚  â”œâ”€â”€ useSmartFilters.ts        # Hook de filtros               â”‚
â”‚  â”œâ”€â”€ useAuth.tsx               # Hook de autenticaciÃ³n         â”‚
â”‚  â””â”€â”€ useReactiveFilters.ts     # Hook de filtros reactivos     â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“ src/services/                                               â”‚
â”‚  â”œâ”€â”€ sugarbiService.ts         # Servicio de API               â”‚
â”‚  â””â”€â”€ api.ts                    # ConfiguraciÃ³n de API          â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸŒ APIs y Endpoints

### API Endpoints

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        API ENDPOINTS                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ğŸ” FILTROS INTELIGENTES                                        â”‚
â”‚  GET  /api/filter-options       # Opciones de filtros          â”‚
â”‚  GET  /api/cosecha-filtered     # Datos filtrados              â”‚
â”‚                                                                 â”‚
â”‚  ğŸ¤– CHATBOT                                                     â”‚
â”‚  POST /api/chat                 # Procesar consulta            â”‚
â”‚  POST /api/chat/langchain       # Consulta con LangChain       â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“Š DASHBOARD                                                   â”‚
â”‚  GET  /api/fincas               # Lista de fincas              â”‚
â”‚  GET  /api/variedades           # Lista de variedades          â”‚
â”‚  GET  /api/zonas                # Lista de zonas               â”‚
â”‚  GET  /api/tiempo               # PerÃ­odos de tiempo           â”‚
â”‚  GET  /api/estadisticas         # EstadÃ­sticas globales        â”‚
â”‚  GET  /api/top-cosechas         # Top cosechas                 â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“ˆ OLAP                                                        â”‚
â”‚  POST /api/olap/execute         # Ejecutar anÃ¡lisis OLAP       â”‚
â”‚  GET  /api/olap/dimensions      # Dimensiones disponibles      â”‚
â”‚  GET  /api/olap/metrics         # MÃ©tricas disponibles         â”‚
â”‚                                                                 â”‚
â”‚  ğŸ” AUTENTICACIÃ“N                                               â”‚
â”‚  POST /api/auth/login           # Iniciar sesiÃ³n               â”‚
â”‚  POST /api/auth/register        # Registrarse                  â”‚
â”‚  GET  /api/auth/profile         # Perfil de usuario            â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ejemplo de Request/Response

```json
// Request: POST /api/chat
{
  "query": "Â¿CuÃ¡les son las 5 mejores fincas por producciÃ³n en 2025?"
}

// Response
{
  "success": true,
  "data": {
    "natural_response": "Las 5 mejores fincas por producciÃ³n en 2025 son: Finca_050 con 15,230 toneladas, Finca_139 con 14,850 toneladas, Finca_177 con 13,420 toneladas, Finca_052 con 12,100 toneladas y Finca_004 con 11,500 toneladas.",
    "chart_data": {
      "labels": ["Finca_050", "Finca_139", "Finca_177", "Finca_052", "Finca_004"],
      "datasets": [{
        "label": "Toneladas",
        "data": [15230, 14850, 13420, 12100, 11500],
        "backgroundColor": ["#10b981", "#3b82f6", "#3b82f6", "#3b82f6", "#3b82f6"]
      }]
    },
    "sql_query": "SELECT f.nombre_finca, SUM(h.toneladas_cana_molida) as total FROM hechos_cosecha h JOIN dim_finca f ON h.id_finca = f.id_finca WHERE h.aÃ±o = 2025 GROUP BY f.id_finca, f.nombre_finca ORDER BY total DESC LIMIT 5",
    "execution_time": 0.245
  }
}
```

## ğŸš€ InstalaciÃ³n y ConfiguraciÃ³n

### Requisitos del Sistema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    REQUISITOS DEL SISTEMA                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ğŸ–¥ï¸ BACKEND                                                      â”‚
â”‚  - Python 3.8+                                                  â”‚
â”‚  - Flask 2.0+                                                   â”‚
â”‚  - MySQL 8.0+                                                   â”‚
â”‚  - Pandas, SQLAlchemy, LangChain                               â”‚
â”‚                                                                 â”‚
â”‚  ğŸŒ FRONTEND                                                     â”‚
â”‚  - Node.js 16+                                                  â”‚
â”‚  - React 18+                                                    â”‚
â”‚  - TypeScript 4.5+                                              â”‚
â”‚  - Chart.js, Three.js                                           â”‚
â”‚                                                                 â”‚
â”‚  ğŸ—„ï¸ BASE DE DATOS                                               â”‚
â”‚  - MySQL 8.0+                                                   â”‚
â”‚  - Data Mart con esquema estrella                              â”‚
â”‚  - Ãndices optimizados                                          â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Comandos de InstalaciÃ³n

```bash
# Backend
cd SugarBI-backend
pip install -r requirements.txt
python web/app.py

# Frontend
cd sugarBI-fronted
npm install
npm run dev

# Base de datos
mysql -u root -p < sugarbi_database_export.sql
```

## ğŸ“ˆ MÃ©tricas y Rendimiento

### KPIs del Sistema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        MÃ‰TRICAS DEL SISTEMA                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  âš¡ RENDIMIENTO                                                  â”‚
â”‚  - Tiempo de respuesta API: < 500ms                            â”‚
â”‚  - Tiempo de carga dashboard: < 2s                             â”‚
â”‚  - Tiempo de procesamiento NLP: < 1s                           â”‚
â”‚                                                                 â”‚
â”‚  ğŸ¯ PRECISIÃ“N                                                    â”‚
â”‚  - PrecisiÃ³n de parsing NLP: > 95%                             â”‚
â”‚  - PrecisiÃ³n de filtros: 100%                                  â”‚
â”‚  - PrecisiÃ³n de visualizaciones: 100%                          â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“Š USABILIDAD                                                   â”‚
â”‚  - Tiempo de aprendizaje: < 5 min                              â”‚
â”‚  - SatisfacciÃ³n del usuario: > 4.5/5                           â”‚
â”‚  - Tasa de error: < 1%                                         â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Notas de Desarrollo

- **VersiÃ³n**: 1.0.0
- **Ãšltima actualizaciÃ³n**: Enero 2025
- **Mantenido por**: Equipo SugarBI
- **Licencia**: MIT

Para mÃ¡s informaciÃ³n tÃ©cnica, consultar la documentaciÃ³n completa en `/docs/`.
